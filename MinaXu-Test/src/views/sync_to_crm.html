<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM 数据同步</title>
    <link rel="stylesheet" href="../css/sync_to_crm.css">
</head>
<body>

    <h2>CRM 数据同步</h2>
    
    <div class="info-box">
        <h3>企业信息</h3>
        <p><strong>公司名称：</strong> <span id="company-name"></span></p>
        <p><strong>客户名称：</strong> <span id="customer-name"></span></p>
        <p><strong>跟进状态：</strong> <span id="follow-status"></span></p>
        <p><strong>进展总结：</strong></p>
        <p id="progress-summary"></p>
        <p><strong>结论总结：</strong></p>
        <p id="conclusion-summary"></p>
        <p><strong>待办总结：</strong></p>
        <p id="todo-summary"></p>
        <p><strong>下一步沟通建议：</strong></p>
        <ul id="next-steps"></ul>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
          const jsonDataString = localStorage.getItem("jsonData");
          if (jsonDataString) {
              const jsonData = JSON.parse(jsonDataString);
              console.log("获取到的 JSON 数据:", jsonData);

              document.getElementById("company-name").textContent = jsonData["公司名称"];
              document.getElementById("customer-name").textContent = jsonData["客户名称"];
              document.getElementById("follow-status").textContent = jsonData["跟进状态"];
              document.getElementById("progress-summary").textContent = jsonData["进展总结"];
              document.getElementById("conclusion-summary").textContent = jsonData["结论总结"];
              document.getElementById("todo-summary").textContent = jsonData["待办总结"];

              const nextStepsList = document.getElementById("next-steps");
              jsonData["下一步沟通建议"].forEach(step => {
                  const li = document.createElement("li");
                  li.textContent = step;
                  nextStepsList.appendChild(li);
              });
          } else {
              console.warn("⚠️ 未找到 jsonData，可能是 localStorage 为空");
          }
      });
    </script>

</body>
</html>
